<script>
    document.querySelector('form').addEventListener('submit', function (event) {
      event.preventDefault();
  
      const country = document.querySelector('#country').value;
      const visaType = document.querySelector('#visa-type').value;
      const paxTypeAdult = document.querySelector('#pax-type-adult').value;
      const paxTypeChild = document.querySelector('#pax-type-child').value;
      const paxTypeInfant = document.querySelector('#pax-type-infant').value;
      const currency = document.querySelector('#currency').value;
  
      // Fetch price for adult
      fetch(`http://localhost:3000/api/visa-price?country=${country}&visaType=${visaType}&paxType=Adult`)
        .then(response => response.json())
        .then(adultPriceData => {
          const adultPrice = adultPriceData[currency.toLowerCase()];
          const totalAdultPrice = adultPrice * paxTypeAdult;
  
          // Fetch price for child
          fetch(`http://localhost:3000/api/visa-price?country=${country}&visaType=${visaType}&paxType=Child`)
            .then(response => response.json())
            .then(childPriceData => {
              const childPrice = childPriceData[currency.toLowerCase()];
              const totalChildPrice = childPrice * paxTypeChild;
  
              // Fetch price for infant
              fetch(`http://localhost:3000/api/visa-price?country=${country}&visaType=${visaType}&paxType=Infant`)
                .then(response => response.json())
                .then(infantPriceData => {
                  const infantPrice = infantPriceData[currency.toLowerCase()];
                  const totalInfantPrice = infantPrice * paxTypeInfant;
  
                  // Calculate total price
                  const totalPrice = totalAdultPrice + totalChildPrice + totalInfantPrice;
                  document.querySelector('#total-price').textContent = `Total Price: ${totalPrice} ${currency}`;
                });
            });
        });
    });
  </script>
  